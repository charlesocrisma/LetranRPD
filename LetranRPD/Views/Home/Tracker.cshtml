@model List<ServiceInformation>
@{
	ViewData["Title"] = "Account";
	var currentUser = Context.Session.GetObject<Account>("account") ?? null;
	if (currentUser == null)
	{
		Context.Response.Redirect("/Home");

	}
}
@{
	ViewBag.Title = "Account";
	Layout = "~/Views/Shared/_Layout.cshtml";

	void originalityBlock(ServiceInformation service)
	{
		string p1 ="";
		string p2 = "";
		string p3 = "";
		string p4 = "";
		switch (service.ServiceProgress.Progress1)
		{
			case 0:
				p1 = "pending";
				break;
			case 1:
				p1 = "current";
				break;
			case 2:
				p1 = "revision";
				break;
			case 3:
				p1 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress2)
		{
			case 0:
				p2 = "pending";
				break;
			case 1:
				p2 = "current";
				break;
			case 2:
				p2 = "revision";
				break;
			case 3:
				p2 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress3)
		{
			case 0:
				p3 = "pending";
				break;
			case 1:
				p3 = "current";
				break;
			case 2:
				p3 = "revision";
				break;
			case 3:
				p3 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress4)
		{
			case 0:
				p4 = "pending";
				break;
			case 1:
				p4 = "current";
				break;
			case 2:
				p4 = "revision";
				break;
			case 3:
				p4 = "completed";
				break;

		}
		<!--First Service-->
		<div class="service-detail" data-service="@service.ServiceType-@service.ServiceId">
			<div class="service-header">
				<h2 class="service-title">Originality Checking Progress</h2>
				<span class="service-status status-failed">Failed</span>
			</div>
			<div class="progress-container">
				<div class="progress-header">
					<h3>PROGRESS</h3>
					<div class="status-badges">
						<span>Status:</span>
						<span class="status-badge badge-complete">Complete</span>
						<span class="status-badge badge-revision">Revision</span>
						<span class="status-badge badge-current">Current</span>
						<span class="status-badge badge-pending">Pending</span>
					</div>
				</div>

				<div class="progress-steps">
					<div class="step">
						<div class="step-circle @p1">1</div>
						<div class="step-content">
							<div class="step-title">Submision of requirments</div>
							<div class="step-details">
								<div class="step-details">Requirements:</div>
								<ul>
									<li><div class="step-details">SR01 - Originality Checking Service Form</div></li>
									<li><div class="step-details">SR02 - Certificate of originality for proposal Manuscript, If applicable</div></li>
									<li><div class="step-details">SR12- Approval Sheet signed by all the panelists</div></li>
									<li><div class="step-details">Word file of the Research Manuscript(without the table of contents andreferences/appendices/bibliography page)</div></li>
								</ul>
							</div>
							<div class="step-time">Processing Time: 30 minutes</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p2">2</div>
						<div class="step-content">
							<div class="step-title">Submission of official receipt</div>
							<div class="step-details">
								<div class="step-details">Payment Instructions:</div>
								<ul>
									<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
									<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
									<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
								</ul>
								Fees: Php 600 (JHS, SHS and Collegiate)
							</div>
							<div class="step-time">Procesing Time: 20 minutes - 1 hour</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p3">3</div>
						<div class="step-content">
							<div class="step-title">Wait for the Originality Check Service Result</div>
							<div class="step-details">
								Note: If the similarity index is 10% above in the first
								run, revise the manuscript according to the
								similarity index results for another round of
								originality checking.

								<div class="step-run-count">
									<strong>Run Count:</strong> <span id="runCount">4</span>
								</div>
								<div class="step-time">Processing Time: 2-3 days</div>
							</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p4">4</div>
						<div class="step-content">
							<div class="step-title">
								Receive the Originality Check results and SR02 -
								Certificate of Originality.
							</div>
							<div class="step-details">
								Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
							</div>
							<div class="step-time">Processing Time: 15 Minutes</div>
						</div>
					</div>

					<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
						END OF TRANSACTION
					</div>

					<div style="font-size: 12px; color: #6c757d; font-style: italic; margin-top: 20px;">
						* If similarity index is above 10%, the student shall edit the paper and repeat steps 3 - 4 twice.*
					</div>
				</div>

				<div class="upload-section" id="uploadSection">
					<h5>Upload Research Papers & Documents</h5>
					<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

					<div class="files-container" id="filesContainer-@service.ServiceId" style="display: none;">
						<!-- Files will be added here -->
					</div>

					<div class="upload-progress" id="uploadProgress" style="display: none;">
						<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
					</div>

					<div>
						<button class="upload-btn" onclick="selectMultipleFiles(@service.ServiceId)">Select Files</button>
						<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
					</div>

					<div class="upload-instructions">
						Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
					</div>
				</div>

				<div class="received-files-section">
					<div class="received-files-header">
						<span style="font-size: 20px;">📥</span>
						<h5>Received Files from Admin</h5>
					</div>

					<div id="receivedFilesContainer">
						<div class="received-file-item">
							<div class="received-file-info">
								<div class="received-file-icon">📋</div>
								<div class="received-file-details">
									<div class="received-file-name">Ocrisma-For_Revision.docx</div>
									<div class="received-file-meta">Received: Feb 11, 2025 | Size: 2.3 MB | From: Research & Publication Department</div>
								</div>
							</div>
							<div>
								<button class="download-btn" onclick="downloadFile('turnitin-report')">Download</button>
							</div>
						</div>

						<div class="received-file-item">
							<div class="received-file-info">
								<div class="received-file-icon">📝</div>
								<div class="received-file-details">
									<div class="received-file-name">Ocrisma-Complete.pdf</div>
									<div class="received-file-meta">Received: April 11, 2025 | Size: 856 KB | From: Research & Publication Department</div>
								</div>
							</div>
							<div>
								<button class="download-btn" onclick="downloadFile('revision-notes')">Download</button>
							</div>
						</div>

					</div>
				</div>

				<div class="panel">
					<div class="panel-header">
						<h2>Admin Remarks</h2>
					</div>
					<div class="panel-content remarks-area">
						<div id="remarks-content">
							<div class="remark info">
								<div class="remark-header">
									<span class="remark-author">RPD Espinosa</span>
									<span class="remark-timestamp">2025-10-16 11:30 AM</span>
								</div>
								<div class="remark-message">
									Your paper exceededed 4 Runs, you must avail another Originality Check Service.
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>

	}
	void InstrumentBlock(ServiceInformation service)
	{
		string p1 = "";
		string p2 = "";
		string p3 = "";
		string p4 = "";
		switch (service.ServiceProgress.Progress1)
		{
			case 0:
				p1 = "pending";
				break;
			case 1:
				p1 = "current";
				break;
			case 2:
				p1 = "revision";
				break;
			case 3:
				p1 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress2)
		{
			case 0:
				p2 = "pending";
				break;
			case 1:
				p2 = "current";
				break;
			case 2:
				p2 = "revision";
				break;
			case 3:
				p2 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress3)
		{
			case 0:
				p3 = "pending";
				break;
			case 1:
				p3 = "current";
				break;
			case 2:
				p3 = "revision";
				break;
			case 3:
				p3 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress4)
		{
			case 0:
				p4 = "pending";
				break;
			case 1:
				p4 = "current";
				break;
			case 2:
				p4 = "revision";
				break;
			case 3:
				p4 = "completed";
				break;

		}

		<!-- Second Service -->
		<div class="service-detail" data-service="@service.ServiceType-@service.ServiceId">
			<div class="service-header">
				<h2 class="service-title">Instrument Validation Progress</h2>
				<span class="service-status status-completed">Completed</span>
			</div>

			<div class="progress-container">
				<div class="progress-header">
					<h3>PROGRESS</h3>
					<div class="status-badges">
						<span>Status:</span>
						<span class="status-badge badge-complete">Complete</span>
						<span class="status-badge badge-revision">Revision</span>
						<span class="status-badge badge-current">Current</span>
						<span class="status-badge badge-pending">Pending</span>
					</div>
				</div>

				<div class="progress-steps">
					<div class="step">
						<div class="step-circle @p1">1</div>
						<div class="step-content">
							<div class="step-title">Submision of requirments</div>
							<div class="step-details">
								<div class="step-details">Requirements:</div>
								<ul>
									<li><div class="step-details">SR03 - Instrument Validation Service Form</div></li>
									<li><div class="step-details">SR02A - Certificate of Originality for Proposal Manuscript</div></li>
									<li><div class="step-details">SR12A - Approval Sheet for Proposal Manuscript</div></li>
									<li><div class="step-details">Research instrument/s</div></li>
									<li><div class="step-details">Research manuscript</div></li>
								</ul>
							</div>
							<div class="step-time">Processing Time: 30 minutes</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p2">2</div>
						<div class="step-content">
							<div class="step-title">Submission of official receipt</div>
							<div class="step-details">
								<div class="step-details">Payment Instructions:</div>
								<ul>
									<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
									<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
									<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
								</ul>
								Fees: Php 600 (JHS, SHS, and Collegiate)
							</div>
							<div class="step-time">Procesing Time: 20 minutes - 1 hour</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p3">3</div>
						<div class="step-content">
							<div class="step-title">Wait for the Insturment Validation Service Result</div>
							<div class="step-details">
								Note: Await the validation, review, revision needed and approval of the Instrument Validator.Once approved, the Instrument Validator or thestudent researcher/s must forward the approvedand signed SR03- Instrument Validation ServiceForm to the RPD.
								<div class="step-run-count">
									<strong>Run Count:</strong> <span id="runCount">2</span>
								</div>
								<div class="step-time">Processing Time: 2-5 days</div>
							</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p4">4</div>
						<div class="step-content">
							<div class="step-title">
								Receive the Originality Check results and SR04 -
								Certificate of Instrument Validation.
							</div>
							<div class="step-details">
								Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
							</div>
							<div class="step-time">Processing Time: 15 Minutes</div>
						</div>
					</div>

					<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
						END OF TRANSACTION
					</div>

				</div>

				<div class="upload-section" id="uploadSection">
					<h5>Upload Research Papers & Documents</h5>
					<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

					<div class="files-container" id="filesContainer-@service.ServiceId" style="display: none;">
						<!-- Files will be added here -->
					</div>

					<div class="upload-progress" id="uploadProgress" style="display: none;">
						<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
					</div>

					<div>
						<button class="upload-btn" onclick="selectMultipleFiles(@service.ServiceId)">Select Files</button>
						<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
					</div>

					<div class="upload-instructions">
						Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
					</div>
				</div>

				<div class="received-files-section">
					<div class="received-files-header">
						<span style="font-size: 20px;">📥</span>
						<h5>Received Files from Admin</h5>
					</div>

					<div id="receivedFilesContainer">

						<div class="received-file-item">
							<div class="received-file-info">
								<div class="received-file-icon">📝</div>
								<div class="received-file-details">
									<div class="received-file-name">Ocrisma-Complete.pdf</div>
									<div class="received-file-meta">Received: April 11, 2025 | Size: 856 KB | From: Research & Publication Department</div>
								</div>
							</div>
							<div>
								<button class="download-btn" onclick="downloadFile('revision-notes')">Download</button>
							</div>
						</div>
					</div>
				</div>

				<div class="panel">
					<div class="panel-header">
						<h2>Admin Remarks</h2>
					</div>
					<div class="panel-content remarks-area">
						<div id="remarks-content">
							<div class="remark info">
								<div class="remark-header">
									<span class="remark-author">RPD Espinosa</span>
									<span class="remark-timestamp">2025-10-16 11:30 AM</span>
								</div>
								<div class="remark-message">
									Congratulations, You can now view yout certificate at Account>Certificates
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>
	}
	void LanguageBlock(ServiceInformation service)
	{
		string p1 = "";
		string p2 = "";
		string p3 = "";
		string p4 = "";
		switch (service.ServiceProgress.Progress1)
		{
			case 0:
				p1 = "pending";
				break;
			case 1:
				p1 = "current";
				break;
			case 2:
				p1 = "revision";
				break;
			case 3:
				p1 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress2)
		{
			case 0:
				p2 = "pending";
				break;
			case 1:
				p2 = "current";
				break;
			case 2:
				p2 = "revision";
				break;
			case 3:
				p2 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress3)
		{
			case 0:
				p3 = "pending";
				break;
			case 1:
				p3 = "current";
				break;
			case 2:
				p3 = "revision";
				break;
			case 3:
				p3 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress4)
		{
			case 0:
				p4 = "pending";
				break;
			case 1:
				p4 = "current";
				break;
			case 2:
				p4 = "revision";
				break;
			case 3:
				p4 = "completed";
				break;

		}

		<!-- Third Service -->
		<div class="service-detail" data-service="@service.ServiceType-@service.ServiceId">
			<div class="service-header">
				<h2 class="service-title">Language Editing Progress</h2>
				<span class="service-status status-pending">Pending</span>
			</div>

			<div class="progress-container">

				<div class="progress-header">
					<h3>PROGRESS</h3>
					<div class="status-badges">
						<span>Status:</span>
						<span class="status-badge badge-complete">Complete</span>
						<span class="status-badge badge-revision">Revision</span>
						<span class="status-badge badge-current">Current</span>
						<span class="status-badge badge-pending">Pending</span>
					</div>
				</div>

				<div class="progress-steps">
					<div class="step">
						<div class="step-circle @p1">1</div>
						<div class="step-content">
							<div class="step-title">Submision of requirments</div>
							<div class="step-details">
								<div class="step-details">Requirements:</div>
								<ul>
									<li><div class="step-details">SR07 - Language Editing Service Form</div></li>
									<li><div class="step-details">SR02A & SR02B - Certificate of Originality(Proposal and Final Manuscript)</div></li>
									<li><div class="step-details">SR12B - Approval Sheet of Final Manuscript</div></li>
									<li><div class="step-details">SR04 - Certificate of Instrument Validation/Exemption, if applicable</div></li>
									<li><div class="step-details">SR06 - Certificate of Data Analysis, if applicable</div></li>
									<li><div class="step-details">MSWord file of the Research Manuscript in RPD Language Editing Format</div></li>
								</ul>
							</div>
							<div class="step-time">Processing Time: 30 minutes</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p2">2</div>
						<div class="step-content">
							<div class="step-title">Submission of official receipt</div>
							<div class="step-details">
								<div class="step-details">Payment Instructions:</div>
								<ul>
									<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
									<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
									<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
								</ul>
								Fees: Php 30(JHS, SHS, and Collegiate) Per page
							</div>
							<div class="step-time">Procesing Time: 20 minutes - 1 hour</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p3">3</div>
						<div class="step-content">
							<div class="step-title">Wait for the Language Editing Service Result</div>
							<div class="step-details">
								Note: Await the Language Editor’s proofreading, editing,revision, and approval of the research manuscript.Once approved, the Editor or the studentresearcher/s must forward the approved andsigned SR07-Language Editing Service Form to theRPD
								<div class="step-run-count">
									<strong>Run Count:</strong> <span id="runCount">0</span>
								</div>
								<div class="step-time">Processing Time: 2-5 days</div>
							</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p4">4</div>
						<div class="step-content">
							<div class="step-title">Receive the SR08- Certificate of Language Editing</div>
							<div class="step-details">
								Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
							</div>
							<div class="step-time">Processing Time: 15 Minutes</div>
						</div>
					</div>

					<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
						END OF TRANSACTION
					</div>

				</div>

				<div class="upload-section" id="uploadSection">
					<h5>Upload Research Papers & Documents</h5>
					<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

					<div class="files-container" id="filesContainer" style="display: none;">
						<!-- Files will be added here -->
					</div>

					<div class="upload-progress" id="uploadProgress" style="display: none;">
						<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
					</div>

					<div>
						<button class="upload-btn" onclick="selectMultipleFiles()">Select Files</button>
						<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
					</div>

					<div class="upload-instructions">
						Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
					</div>
				</div>

				<div class="received-files-section">
					<div class="received-files-header">
						<span style="font-size: 20px;">📥</span>
						<h5>Received Files from Admin</h5>
					</div>

					<div id="receivedFilesContainer">

						<div class="received-file-item">
							<div class="received-file-info">
								<div class="received-file-icon">📝</div>
								<div class="received-file-details">
									<div class="received-file-name">No Files</div>
								</div>
							</div>
						</div>

					</div>
				</div>

				<div class="panel">
					<div class="panel-header">
						<h2>Admin Remarks</h2>
					</div>
					<div class="panel-content remarks-area">
						<div id="remarks-content">
							<div class="remark info">
								<div class="remark-header">
									<span class="remark-author">RPD Espinosa</span>
									<span class="remark-timestamp">2025-10-16 11:30 AM</span>
								</div>
								<div class="remark-message">
									Kindly submit the requirments to proceed with the Language Editing Service, Thank you.
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>

	}
	void DataBlock(ServiceInformation service)
	{
		string p1 = "";
		string p2 = "";
		string p3 = "";
		string p4 = "";
		switch (service.ServiceProgress.Progress1)
		{
			case 0:
				p1 = "pending";
				break;
			case 1:
				p1 = "current";
				break;
			case 2:
				p1 = "revision";
				break;
			case 3:
				p1 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress2)
		{
			case 0:
				p2 = "pending";
				break;
			case 1:
				p2 = "current";
				break;
			case 2:
				p2 = "revision";
				break;
			case 3:
				p2 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress3)
		{
			case 0:
				p3 = "pending";
				break;
			case 1:
				p3 = "current";
				break;
			case 2:
				p3 = "revision";
				break;
			case 3:
				p3 = "completed";
				break;

		}

		switch (service.ServiceProgress.Progress4)
		{
			case 0:
				p4 = "pending";
				break;
			case 1:
				p4 = "current";
				break;
			case 2:
				p4 = "revision";
				break;
			case 3:
				p4 = "completed";
				break;

		}

		<!-- Fourth Service -->
		<div class="service-detail" data-service="@service.ServiceType-@service.ServiceId">
			<div class="service-header">
				<h2 class="service-title">Data Analysis Progress</h2>
				<span class="service-status status-processing">Processing</span>
			</div>

			<div class="progress-container">
				<div class="progress-header">
					<h3>PROGRESS</h3>
					<div class="status-badges">
						<span>Status:</span>
						<span class="status-badge badge-complete">Complete</span>
						<span class="status-badge badge-revision">Revision</span>
						<span class="status-badge badge-current">Current</span>
						<span class="status-badge badge-pending">Pending</span>
					</div>
				</div>

				<div class="progress-steps">
					<div class="step">
						<div class="step-circle @p1">1</div>
						<div class="step-content">
							<div class="step-title">Submision of requirments</div>
							<div class="step-details">
								<div class="step-details">Requirements:</div>
								<ul>
									<li><div class="step-details">SR05 - Data Analysis Service Form</div></li>
									<li><div class="step-details">SR04 - Certificate of Instrument Validation/Exemption</div></li>
									<li><div class="step-details">SR02A - Certificate of Originality for Proposal Manuscript</div></li>
									<li><div class="step-details">Encoded Data Set (Number Coded Format)</div></li>
									<li><div class="step-details">Statistical Tool/Treatment to be availed</div></li>
									<li><div class="step-details">Research Manuscript</div></li>
								</ul>
							</div>
							<div class="step-time">Processing Time: 30 minutes</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p2">2</div>
						<div class="step-content">
							<div class="step-title">Submission of official receipt</div>
							<div class="step-details">
								<div class="step-details">Payment Instructions:</div>
								<ul>
									<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
									<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
									<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
								</ul>
								<div class="step-details">Fees:</div>
								<ul>
									<li><div class="step-details">Basic statistical tools: Php 2,500 </div></li>
									<li><div class="step-details">Advanced statistical tools: Php 3,000 </div></li>
								</ul>
							</div>
							<div class="step-time">Procesing Time: 20 minutes - 1 hour</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p3">3</div>
						<div class="step-content">
							<div class="step-title">Wait for the Language Editing Service Result</div>
							<div class="step-details">
								Note: Await the Data Analyst’s review, discussion, andanalysis of the dataset. Once approved, the Analystor the student researcher/s must forward theapproved and signed SR05-Data Analysis ServiceForm to the RPD.
								<div class="step-run-count">
									<strong>Run Count:</strong> <span id="runCount">0</span>
								</div>
								<div class="step-time">Processing Time: 2-3 days</div>
							</div>
						</div>
					</div>

					<div class="step">
						<div class="step-circle @p4">4</div>
						<div class="step-content">
							<div class="step-title">Receive the SR06 - Certificate of Data Analysis.</div>
							<div class="step-details">
								Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
							</div>
							<div class="step-time">Processing Time: 15 Minutes</div>
						</div>
					</div>

					<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
						END OF TRANSACTION
					</div>

				</div>

				<div class="upload-section" id="uploadSection">
					<h5>Upload Research Papers & Documents</h5>
					<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

					<div class="files-container" id="filesContainer" style="display: none;">
						<!-- Files will be added here -->
					</div>

					<div class="upload-progress" id="uploadProgress" style="display: none;">
						<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
					</div>

					<div>
						<button class="upload-btn" onclick="selectMultipleFiles()">Select Files</button>
						<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
					</div>

					<div class="upload-instructions">
						Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
					</div>
				</div>

				<div class="received-files-section">
					<div class="received-files-header">
						<span style="font-size: 20px;">📥</span>
						<h5>Received Files from Admin</h5>
					</div>

					<div id="receivedFilesContainer">

						<div class="received-file-item">
							<div class="received-file-info">
								<div class="received-file-icon">📝</div>
								<div class="received-file-details">
									<div class="received-file-name">No Files</div>
								</div>
							</div>
						</div>

					</div>
				</div>

				<div class="panel">
					<div class="panel-header">
						<h2>Admin Remarks</h2>
					</div>
					<div class="panel-content remarks-area">
						<div id="remarks-content">
							<div class="remark info">
								<div class="remark-header">
									<span class="remark-author">RPD Espinosa</span>
									<span class="remark-timestamp">2025-10-16 11:30 AM</span>
								</div>
								<div class="remark-message">
									Proceed to the finance department for the payment of Data Analysis Service, Thank you.
								</div>
							</div>
						</div>
					</div>
				</div>

			</div>
		</div>

	}

}


<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
<title>Account</title>
<link rel="stylesheet" href="~/css/Tracker.css" asp-append-version="true" />

<div class="container">

	<div class="main-content">
		<div class="sidebar">
			<h3>Availed Services</h3>

			@{
				foreach (var services in Model)
				{
					if (currentUser.StudentNumber != services.StudentNumber)
					{
						continue;
					}
					<div class="service-item" onclick="showService('@services.ServiceType-@services.ServiceId')">
						<h4>@services.ServiceType</h4>
						<p>Application Date: @services.ServiceProgress.AppliedDate</p>
					</div>
				}
			}
			
			<!--
			<div class="service-item" onclick="showService('student-research-clearance')">
				<h4>Student Research Clearance</h4>
				<p>Application Date: Jan 1, 2025</p>
			</div>

			<div class="service-item" onclick="showService('ethics-review')">
				<h4>Ethics Review</h4>
				<p>Application Date: Jan 1, 2025</p>
			</div>
			-->
		</div>
			

		<div class="content-area">
			<div id="service-content">
				<!--No Service-->
				<div id="no-service" class="no-service-message" style="display: none;">
					<h2>No Service Availed</h2>
					<p>You haven't availed any services yet. Contact the office to start a new service request.</p>
				</div>



			</div>



			@{
				foreach (var services in Model)
				{
					switch (services.ServiceType)
					{
						case "Originality Check":
							originalityBlock(services);
							break;
						case "Instrument Validation":
							InstrumentBlock(services);
							break;
						case "Language Editing":
							LanguageBlock(services);
							break;
						case "Data Analysis":
							DataBlock(services);
							break;
					}
				}

				
			}


			







			<!-- Fifth Service-->
			<div class="service-detail" data-service="student-research-clearance">
				<div class="service-header">
					<h2 class="service-title">Student Research Clearance Progress </h2>
					<span class="service-status status-processing">Processing</span>
				</div>

				<div class="progress-container">

					<div class="progress-header">
						<h3>PROGRESS</h3>
						<div class="status-badges">
							<span>Status:</span>
							<span class="status-badge badge-complete">Complete</span>
							<span class="status-badge badge-revision">Revision</span>
							<span class="status-badge badge-current">Current</span>
							<span class="status-badge badge-pending">Pending</span>
						</div>
					</div>

					<div class="progress-steps">
						<div class="step">
							<div class="step-circle completed">1</div>
							<div class="step-content">
								<div class="step-title">Submision of requirments</div>
								<div class="step-details">
									<div class="step-details">Requirements:</div>
									<ul>
										<li><div class="step-details">SR02A & SR02B - Certificate of Originality (Proposal and Final Manuscript)</div></li>
										<li><div class="step-details">SR04 - Certificate of Instrument Validation/Exemption, if applicable</div></li>
										<li><div class="step-details">SR06 - Certificate of Data Analysis, if applicable</div></li>
										<li><div class="step-details">SR08 - Certificate of Language Editing</div></li>
										<li><div class="step-details">Final Manuscript, incorporating the language-edited version</div></li>
									</ul>
								</div>
								<div class="step-time">Processing Time: 1-2 days</div>
							</div>
						</div>

						<div class="step">
							<div class="step-circle current">2</div>
							<div class="step-content">
								<div class="step-title">Receive the SR09 - Student Research Clearance.</div>
								<div class="step-details">
									Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
								</div>
								<div class="step-time">Processing Time: 15 Minutes</div>
							</div>
						</div>

						<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
							END OF TRANSACTION
						</div>

					</div>

					<div class="upload-section" id="uploadSection">
						<h5>Upload Research Papers & Documents</h5>
						<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

						<div class="files-container" id="filesContainer" style="display: none;">
							<!-- Files will be added here -->
						</div>

						<div class="upload-progress" id="uploadProgress" style="display: none;">
							<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
						</div>

						<div>
							<button class="upload-btn" onclick="selectMultipleFiles()">Select Files</button>
							<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
						</div>

						<div class="upload-instructions">
							Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
						</div>
					</div>

					<div class="received-files-section">
						<div class="received-files-header">
							<span style="font-size: 20px;">📥</span>
							<h5>Received Files from Admin</h5>
						</div>

						<div id="receivedFilesContainer">

							<div class="received-file-item">
								<div class="received-file-info">
									<div class="received-file-icon">📝</div>
									<div class="received-file-details">
										<div class="received-file-name">No Files</div>
									</div>
								</div>
							</div>

						</div>
					</div>

					<div class="panel">
						<div class="panel-header">
							<h2>Admin Remarks</h2>
						</div>
						<div class="panel-content remarks-area">
							<div id="remarks-content">
								<div class="remark info">
									<div class="remark-header">
										<span class="remark-author">RPD Espinosa</span>
										<span class="remark-timestamp">2025-10-16 11:30 AM</span>
									</div>
									<div class="remark-message">
										Kindly wait for your certificate, Thank you.
									</div>
								</div>
							</div>
						</div>
					</div>

				</div>
			</div>









			<!-- Sixth Service-->
			<div class="service-detail" data-service="ethics-review">
				<div class="service-header">
					<h2 class="service-title">Ethics Review </h2>
					<span class="service-status status-processing">Processing</span>
				</div>

				<div class="progress-container">

					<div class="progress-header">
						<h3>PROGRESS</h3>
						<div class="status-badges">
							<span>Status:</span>
							<span class="status-badge badge-complete">Complete</span>
							<span class="status-badge badge-revision">Revision</span>
							<span class="status-badge badge-current">Current</span>
							<span class="status-badge badge-pending">Pending</span>
						</div>
					</div>

					<div class="progress-steps">
						<div class="step">
							<div class="step-circle revision">1</div>
							<div class="step-content">
								<div class="step-title">Submision of requirments</div>
								<div class="step-details">
									<div class="step-details">Requirements:</div>
									<ul>
										<li><div class="step-details">ERB01 - Ethics Review Application Form</div></li>
										<li><div class="step-details">ERB02 - Ethics Review Application Submission Checklist Form</div></li>
										<li><div class="step-details">ERB03 - Application for Ethics Review Exemption Form</div></li>
										<li>
											<div class="step-details">
												Research Protocol - Title, researchers and
												affiliations, research objectives, significance, brief
												literature review, and conceptual framework,
												methods (including sample, locate, recruitment of
												participants and/or respondents, inclusion criteria,
												instruments, and procedures), ethical
												considerations relevant to the study, research
												budget
											</div>
										</li>
										<li>
											<div class="step-details">
												Participants and/or Respondents recruitment
												materials, letters, scripts and templates
											</div>
										</li>
										<li>
											<div class="step-details">
												Informed Consent Forms and Assent Forms (if
												applicable)
											</div>
										</li>
										<li>
											<div class="step-details">
												Ethical considerations relevant to the study
											</div>
										</li>
										<li>
											<div class="step-details">
												Funding/Grant/Sponsor letter or contract and/or
												Memorandum of Agreement among collaborating
												institutions (if applicable)
											</div>
										</li>
										<li>
											<div class="step-details">
												Additional materials relevant to justifying the
												exemption category
											</div>
										</li>
										<li>
											<div class="step-details">
												Instruments, questionnaires, interview or FGD
												scripts and protocols
											</div>
										</li>
									</ul>
								</div>
								<div class="step-time">Processing Time: 30 minutes</div>
							</div>
						</div>

						<div class="step">
							<div class="step-circle pending">2</div>
							<div class="step-content">
								<div class="step-title">Submission of official receipt</div>
								<div class="step-details">
									<div class="step-details">Payment Instructions:</div>
									<ul>
										<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
										<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
										<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
									</ul>
									Fees: Php 700 (initial payment for exemption)
								</div>
								<div class="step-time">Procesing Time: 30 minutes - 1 hour</div>
							</div>
						</div>

						<div class="step">
							<div class="step-circle pending">3</div>
							<div class="step-content">
								<div class="step-title">Wait for the Ethics Review Result</div>
								<div class="step-details">
									Note: Await the result, revision needed and approval of the ethics review. <b>ONCE APPROVED</b>, the Reviewer or the student researcher/s must forward the approved andsigned ERB02 and ERB03.
									If <b>NOT APPROVED</b>, the student will receive an email
									regarding if the paper will undergo expedited or
									full review and will receive the additional
									payment advice.
									*Please note that Form ERB04 must be filed before the
									payment advice can be issued.
									<div class="step-run-count">
										<strong>Run Count:</strong> <span id="runCount">0</span>
									</div>
									<div class="step-time">Processing Time: 5-7 days</div>
								</div>
							</div>
						</div>


						<div class="step">
							<div class="step-circle pending">4</div>
							<div class="step-content">
								<div class="step-title">Submission of official receipt</div>
								<div class="step-details">
									<div class="step-details">Payment Instructions:</div>
									<ul>
										<li><div class="step-details">If at Letran Cashier, send a picture of the official receipt.</div></li>
										<li><div class="step-details">If bank deposit, send a picture of the transaction slip.</div></li>
										<li><div class="step-details">If online payment, send a screenshot of the email/text confirmation of the online payment.</div></li>
									</ul>
									<div class="step-details">Fees:</div>
									<ul>
										<li><div class="step-details">Php 1,750 (expedited)</div></li>
										<li><div class="step-details">Php 3,500 (full review)</div></li>
									</ul>

								</div>
								<div class="step-time">Procesing Time: 30 minutes - 1 hour</div>
							</div>
						</div>

						<div class="step">
							<div class="step-circle pending">5</div>
							<div class="step-content">
								<div class="step-title">Wait for the Ethics Review Result</div>
								<div class="step-details">
									Note: Await the result, revision needed and approval of
									the Ethics Reviewer.
									<b>ONCE APPROVED</b>, the Reviewer or the student
									researcher/s must forward the approved and
									signed ERB02 and ERB04.
									If <b>NOT APPROVED</b>, the researcher/s will make the
									necessary revision until the RPD will issue
									ERB07 - Certificate of Ethics Review
									<div class="step-run-count">
										<strong>Run Count:</strong> <span id="runCount">0</span>
									</div>
									<div class="step-time">
										Processing Time: 7-14 days
										(expedited),
										14 days- 1
										month (full
										review)
									</div>
								</div>
							</div>
						</div>

						<div class="step">
							<div class="step-circle pending">6</div>
							<div class="step-content">
								<div class="step-title">Receive the ERB07 - Certificate of Ethical Review.</div>
								<div class="step-details">
									Note: To view/download your certificate, please hover your cursor at the icon on the right top corner and go to Account > Certificates
								</div>
								<div class="step-time">Processing Time: 15 Minutes</div>
							</div>
						</div>

						<div style="text-align: center; margin: 30px 0; font-weight: bold; color: #2c3e50;">
							END OF TRANSACTION
						</div>

					</div>

					<div class="upload-section" id="uploadSection">
						<h5>Upload Research Papers & Documents</h5>
						<p style="color: #6c757d; margin-bottom: 15px;">Upload your research paper and any supporting documents</p>

						<div class="files-container" id="filesContainer" style="display: none;">
							<!-- Files will be added here -->
						</div>

						<div class="upload-progress" id="uploadProgress" style="display: none;">
							<div class="upload-progress-bar" id="progressBar" style="width: 0%"></div>
						</div>

						<div>
							<button class="upload-btn" onclick="selectMultipleFiles()">Select Files</button>
							<button class="submit-btn" id="submitBtn" onclick="submitFiles()" disabled>Submit Files</button>
						</div>

						<div class="upload-instructions">
							Accepted formats: .pdf, .doc, .docx, .txt, .jpg, .jpeg, .png | Max size: 10MB per file
						</div>
					</div>

					<div class="received-files-section">
						<div class="received-files-header">
							<span style="font-size: 20px;">📥</span>
							<h5>Received Files from Admin</h5>
						</div>

						<div id="receivedFilesContainer">

							<div class="received-file-item">
								<div class="received-file-info">
									<div class="received-file-icon">📝</div>
									<div class="received-file-details">
										<div class="received-file-name">No Files</div>
									</div>
								</div>
							</div>

						</div>
					</div>

					<div class="panel">
						<div class="panel-header">
							<h2>Admin Remarks</h2>
						</div>
						<div class="panel-content remarks-area">
							<div id="remarks-content">
								<div class="remark info">
									<div class="remark-header">
										<span class="remark-author">RPD Espinosa</span>
										<span class="remark-timestamp">2025-10-16 11:30 AM</span>
									</div>
									<div class="remark-message">
										I viewed your requirment submission, you have 1 missing document, kindly follow up your ERB01. Thank you.
									</div>
								</div>
							</div>
						</div>
					</div>


				</div>

			</div>
		</div>

	</div>
</div>




<script>
    // Store files per service using service ID as key
    let serviceFiles = {};
    let uploadedServiceFiles = {};
    let remarksData = {};
    let receivedFilesData = {};

    function initializeServiceArrays(serviceId) {
        if (!serviceFiles[serviceId]) {
            serviceFiles[serviceId] = [];
        }
        if (!uploadedServiceFiles[serviceId]) {
            uploadedServiceFiles[serviceId] = [];
        }
        if (!remarksData[serviceId]) {
            remarksData[serviceId] = [];
        }
        if (!receivedFilesData[serviceId]) {
            receivedFilesData[serviceId] = [];
        }
    }

    function showService(serviceId) {
        const sidebarItems = document.querySelectorAll('.service-item');
        sidebarItems.forEach(item => item.classList.remove('active'));
        event.target.closest('.service-item').classList.add('active');

        const serviceDetails = document.querySelectorAll('.service-detail');
        serviceDetails.forEach(detail => detail.classList.remove('active'));

        const selectedService = document.querySelector(`.service-detail[data-service="${serviceId}"]`);
        if (selectedService) {
            selectedService.classList.add('active');
            // Initialize arrays for this specific service
            initializeServiceArrays(serviceId);
        }
    }

    function selectMultipleFiles(serviceId) {
        initializeServiceArrays(serviceId);

        const input = document.createElement('input');
        input.type = 'file';
        input.multiple = true;
        input.accept = '.pdf,.doc,.docx,.txt,.jpg,.jpeg,.png';

        input.onchange = function(e) {
            const files = Array.from(e.target.files);
            files.forEach(file => {
                if (file.size <= 10 * 1024 * 1024) {
                    serviceFiles[serviceId].push({
                        file: file,
                        id: Date.now() + Math.random(),
                        uploaded: false
                    });
                } else {
                    alert(`${file.name} is too large. Maximum file size is 10MB.`);
                }
            });

            updateFilesDisplay(serviceId);
            updateSubmitButton(serviceId);
        };

        input.click();
    }

    function updateFilesDisplay(serviceId) {
        const container = document.getElementById('filesContainer-' + serviceId);
        const uploadSection = container?.closest('.upload-section');

        if (!container) return;

        if (serviceFiles[serviceId] && serviceFiles[serviceId].length > 0) {
            container.style.display = 'block';
            if (uploadSection) uploadSection.classList.add('has-files');

            container.innerHTML = serviceFiles[serviceId].map(fileObj => `
                <div class="file-item">
                    <div class="file-info">
                        <div class="file-icon">📄</div>
                        <div class="file-details">
                            <div class="file-name">${fileObj.uploaded ? '✅' : '📎'} ${fileObj.file.name}</div>
                            <div class="file-size">${formatFileSize(fileObj.file.size)}</div>
                        </div>
                    </div>
                    <button class="remove-file" onclick="removeFile('${serviceId}', '${fileObj.id}')">${fileObj.uploaded ? 'Remove' : '✕'}</button>
                </div>
            `).join('');
        } else {
            container.style.display = 'none';
            if (uploadSection) uploadSection.classList.remove('has-files');
        }
    }

    function removeFile(serviceId, fileId) {
        if (serviceFiles[serviceId]) {
            serviceFiles[serviceId] = serviceFiles[serviceId].filter(f => f.id != fileId);
        }
        if (uploadedServiceFiles[serviceId]) {
            uploadedServiceFiles[serviceId] = uploadedServiceFiles[serviceId].filter(f => f.id != fileId);
        }
        updateFilesDisplay(serviceId);
        updateSubmitButton(serviceId);
    }

    function formatFileSize(bytes) {
        if (bytes === 0) return '0 Bytes';
        const k = 1024;
        const sizes = ['Bytes', 'KB', 'MB', 'GB'];
        const i = Math.floor(Math.log(bytes) / Math.log(k));
        return parseFloat((bytes / Math.pow(k, i)).toFixed(2)) + ' ' + sizes[i];
    }

    function updateSubmitButton(serviceId) {
        const submitBtn = document.getElementById('submitBtn-' + serviceId);

        if (!submitBtn) return;

        const unuploadedFiles = serviceFiles[serviceId]?.filter(f => !f.uploaded) || [];

        if (unuploadedFiles.length > 0) {
            submitBtn.disabled = false;
            submitBtn.textContent = `Submit ${unuploadedFiles.length} File(s)`;
        } else {
            submitBtn.disabled = true;
            submitBtn.textContent = 'No files to submit';
        }
    }

    function submitFiles(serviceId) {
        const unuploadedFiles = serviceFiles[serviceId]?.filter(f => !f.uploaded) || [];
        if (unuploadedFiles.length === 0) return;

        const progressBar = document.getElementById('progressBar-' + serviceId);
        const uploadProgress = document.getElementById('uploadProgress-' + serviceId);
        const submitBtn = document.getElementById('submitBtn-' + serviceId);

        if (!submitBtn || !uploadProgress || !progressBar) return;

        uploadProgress.style.display = 'block';
        submitBtn.disabled = true;
        submitBtn.textContent = 'Uploading...';

        let progress = 0;
        const interval = setInterval(() => {
            progress += Math.random() * 15;
            if (progress >= 100) {
                progress = 100;
                clearInterval(interval);

                unuploadedFiles.forEach(fileObj => {
                    fileObj.uploaded = true;
                    if (!uploadedServiceFiles[serviceId]) {
                        uploadedServiceFiles[serviceId] = [];
                    }
                    uploadedServiceFiles[serviceId].push(fileObj);
                });

                setTimeout(() => {
                    uploadProgress.style.display = 'none';
                    progressBar.style.width = '0%';
                    updateFilesDisplay(serviceId);
                    updateSubmitButton(serviceId);
                    alert(`Successfully uploaded ${unuploadedFiles.length} file(s) for ${serviceId}!`);
                }, 500);
            }
            progressBar.style.width = progress + '%';
        }, 200);
    }

    function downloadFile(fileId, serviceId) {
        const fileNames = {
            'turnitin-report': 'Turnitin_Report_Draft1.pdf',
            'revision-notes': 'Revision_Notes_Comments.docx',
            'similarity-report': 'Similarity_Index_Report.pdf'
        };

        const fileName = fileNames[fileId] || 'document.pdf';
        alert(`Downloading: ${fileName} from service: ${serviceId}`);
        console.log(`Downloading file: ${fileName} from service: ${serviceId}`);
    }

    document.addEventListener('DOMContentLoaded', function() {
        const serviceItems = document.querySelectorAll('.service-item');
        const serviceDetails = document.querySelectorAll('.service-detail');
        const noServiceMsg = document.getElementById('no-service');

        const hasServices = serviceItems.length > 0;

        if (hasServices) {
            if (noServiceMsg) noServiceMsg.style.display = 'none';

            serviceItems.forEach(item => item.classList.remove('active'));
            if (serviceItems) {
                serviceItems.classList.add('active');
                const firstServiceId = serviceItems.getAttribute('onclick').match(/'([^']+)'/);
                initializeServiceArrays(firstServiceId);
            }

            serviceDetails.forEach(detail => detail.classList.remove('active'));
            if (serviceDetails) {
                serviceDetails.classList.add('active');
            }
        } else {
            if (noServiceMsg) noServiceMsg.style.display = 'block';
            serviceDetails.forEach(detail => detail.classList.remove('active'));
        }
    });
</script>
